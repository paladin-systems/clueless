/* Base post-it styles */
.post-it {
  @apply relative bg-white/90 backdrop-blur-sm shadow-lg;
  @apply border border-gray-200/50 rounded-lg overflow-hidden;
  @apply transition-all duration-200;
}

/* Disable transitions during drag to prevent conflicts */
.post-it.dragging,
.post-it.resizing {
  transition: none !important;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

/* Category-based styles */
.post-it.category-answer {
  @apply bg-blue-50/90 border-blue-200/60;
}

.post-it.category-answer .drag-handle {
  @apply bg-blue-100/60 border-blue-200/50;
}

.post-it.category-advice {
  @apply bg-amber-50/90 border-amber-200/60;
}

.post-it.category-advice .drag-handle {
  @apply bg-amber-100/60 border-amber-200/50;
}

.post-it.category-follow-up {
  @apply bg-purple-50/90 border-purple-200/60;
}

.post-it.category-follow-up .drag-handle {
  @apply bg-purple-100/60 border-purple-200/50;
}

/* Selected state */
.post-it.selected,
.post-it:focus-visible {
  @apply ring-2 ring-blue-500 ring-offset-2 ring-offset-transparent;
  @apply shadow-xl;
}

/* Hover and interactive states */
.post-it:hover:not(.dragging):not(.resizing) {
  @apply shadow-xl;
  transform: scale(1.02) !important;
}

.post-it:active:not(.dragging):not(.resizing) {
  @apply shadow-md;
  transform: scale(0.98) !important;
}

/* Drag handle */
.post-it .drag-handle {
  @apply cursor-move bg-gray-50/50 border-b border-gray-200/50;
}

/* Close button */
.post-it .close-button {
  @apply cursor-pointer;
  @apply flex items-center justify-center;
  @apply opacity-60 transition-all duration-200;
}

.post-it:hover .close-button,
.post-it.selected .close-button {
  @apply opacity-100;
}

.post-it .close-button:hover {
  @apply scale-110;
}

/* Content area */
.post-it .prose {
  @apply prose-sm prose-slate;
  @apply prose-headings:text-gray-700 prose-headings:font-medium;
  @apply prose-p:text-gray-600;
  @apply prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline;
  @apply prose-code:text-gray-800 prose-code:bg-gray-100/50 prose-code:px-1 prose-code:rounded;
}

/* Resize handle */
.post-it .react-resizable-handle {
  @apply absolute bottom-1 right-1 w-4 h-4 cursor-se-resize;
  @apply transition-opacity duration-200 opacity-0;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

.post-it:hover .react-resizable-handle,
.post-it.selected .react-resizable-handle {
  @apply opacity-100;
}

/* Animations */
.post-it {
  animation: post-it-in 0.3s ease-out;
}

@keyframes post-it-in {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Delete animation */
.post-it.deleting {
  animation: post-it-out 0.2s ease-in forwards;
}

@keyframes post-it-out {
  to {
    opacity: 0;
    transform: scale(0.9) rotate(5deg);
  }
}
